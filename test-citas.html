<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test API Citas</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        h1, h2 {
            color: #333;
        }
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #2980b9;
        }
        .result {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
        }
        .success {
            border-left: 4px solid #27ae60;
        }
        .error {
            border-left: 4px solid #e74c3c;
        }
        .endpoint {
            background: #ecf0f1;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .method {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 3px;
            font-weight: bold;
            margin-right: 10px;
        }
        .get { background: #3498db; color: white; }
        .post { background: #27ae60; color: white; }
        .put { background: #f39c12; color: white; }
        .patch { background: #9b59b6; color: white; }
        .delete { background: #e74c3c; color: white; }
    </style>
</head>
<body>
    <h1>üß™ Test API de Citas</h1>
    <p>Base URL: <strong>http://localhost:7000/api/citas</strong></p>

    <div class="container">
        <h2>üìã Endpoints Disponibles</h2>
        
        <div class="endpoint">
            <span class="method get">GET</span>
            <strong>/citas</strong> - Obtener todas las citas
            <button onclick="testGetAll()">Probar</button>
            <div id="result-getAll" class="result" style="display:none;"></div>
        </div>

        <div class="endpoint">
            <span class="method get">GET</span>
            <strong>/citas/:id</strong> - Obtener cita por ID
            <input type="number" id="citaId" placeholder="ID de cita" value="1" style="padding: 5px; margin: 0 10px;">
            <button onclick="testGetById()">Probar</button>
            <div id="result-getById" class="result" style="display:none;"></div>
        </div>

        <div class="endpoint">
            <span class="method get">GET</span>
            <strong>/citas/clientes/:id</strong> - Obtener citas por cliente
            <input type="number" id="clienteId" placeholder="ID de cliente" value="1" style="padding: 5px; margin: 0 10px;">
            <button onclick="testGetByClient()">Probar</button>
            <div id="result-getByClient" class="result" style="display:none;"></div>
        </div>

        <div class="endpoint">
            <span class="method get">GET</span>
            <strong>/citas/mes</strong> - Obtener citas por mes
            <input type="number" id="anio" placeholder="A√±o" value="2025" style="padding: 5px; margin: 0 5px; width: 80px;">
            <input type="number" id="mes" placeholder="Mes" value="11" style="padding: 5px; margin: 0 5px; width: 60px;">
            <button onclick="testGetByMes()">Probar</button>
            <div id="result-getByMes" class="result" style="display:none;"></div>
        </div>

        <div class="endpoint">
            <span class="method get">GET</span>
            <strong>/citas/semanas</strong> - Obtener citas por semana
            <input type="number" id="anioSemana" placeholder="A√±o" value="2025" style="padding: 5px; margin: 0 5px; width: 80px;">
            <input type="number" id="semana" placeholder="Semana" value="47" style="padding: 5px; margin: 0 5px; width: 60px;">
            <button onclick="testGetBySemana()">Probar</button>
            <div id="result-getBySemana" class="result" style="display:none;"></div>
        </div>

        <div class="endpoint">
            <span class="method get">GET</span>
            <strong>/citas/dias</strong> - Obtener citas por d√≠a
            <input type="date" id="fecha" value="2025-11-22" style="padding: 5px; margin: 0 10px;">
            <button onclick="testGetByDia()">Probar</button>
            <div id="result-getByDia" class="result" style="display:none;"></div>
        </div>

        <div class="endpoint">
            <span class="method post">POST</span>
            <strong>/citas</strong> - Crear nueva cita
            <button onclick="testCreate()">Probar</button>
            <div id="result-create" class="result" style="display:none;"></div>
        </div>

        <div class="endpoint">
            <span class="method patch">PATCH</span>
            <strong>/citas/estado</strong> - Actualizar estado de cita
            <button onclick="testUpdateEstado()">Probar</button>
            <div id="result-updateEstado" class="result" style="display:none;"></div>
        </div>

        <div class="endpoint">
            <span class="method patch">PATCH</span>
            <strong>/citas/fecha</strong> - Actualizar fecha de cita
            <button onclick="testUpdateFecha()">Probar</button>
            <div id="result-updateFecha" class="result" style="display:none;"></div>
        </div>

        <div class="endpoint">
            <span class="method delete">DELETE</span>
            <strong>/citas/:id</strong> - Eliminar cita
            <input type="number" id="deleteCitaId" placeholder="ID de cita" value="999" style="padding: 5px; margin: 0 10px;">
            <button onclick="testDelete()">Probar</button>
            <div id="result-delete" class="result" style="display:none;"></div>
        </div>
    </div>

    <div class="container">
        <h2>üìä Resumen de Pruebas</h2>
        <div id="summary"></div>
    </div>

    <script>
        const BASE_URL = 'http://localhost:7000/api/citas';
        const results = {};

        async function testGetAll() {
            const resultDiv = document.getElementById('result-getAll');
            resultDiv.style.display = 'block';
            resultDiv.textContent = 'Cargando...';
            
            try {
                const response = await fetch(BASE_URL);
                const data = await response.json();
                
                resultDiv.className = 'result success';
                resultDiv.textContent = `Status: ${response.status}\n\n${JSON.stringify(data, null, 2)}`;
                results['GET /citas'] = '‚úÖ Success';
                
                console.log('GET /citas:', data);
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `Error: ${error.message}`;
                results['GET /citas'] = '‚ùå Error';
            }
            updateSummary();
        }

        async function testGetById() {
            const id = document.getElementById('citaId').value;
            const resultDiv = document.getElementById('result-getById');
            resultDiv.style.display = 'block';
            resultDiv.textContent = 'Cargando...';
            
            try {
                const response = await fetch(`${BASE_URL}/${id}`);
                const data = await response.json();
                
                resultDiv.className = 'result success';
                resultDiv.textContent = `Status: ${response.status}\n\n${JSON.stringify(data, null, 2)}`;
                results['GET /citas/:id'] = '‚úÖ Success';
                
                console.log('GET /citas/:id:', data);
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `Error: ${error.message}`;
                results['GET /citas/:id'] = '‚ùå Error';
            }
            updateSummary();
        }

        async function testGetByClient() {
            const clienteId = document.getElementById('clienteId').value;
            const resultDiv = document.getElementById('result-getByClient');
            resultDiv.style.display = 'block';
            resultDiv.textContent = 'Cargando...';
            
            try {
                const response = await fetch(`${BASE_URL}/clientes/${clienteId}`);
                const data = await response.json();
                
                resultDiv.className = 'result success';
                resultDiv.textContent = `Status: ${response.status}\n\n${JSON.stringify(data, null, 2)}`;
                results['GET /citas/clientes/:id'] = '‚úÖ Success';
                
                console.log('GET /citas/clientes/:id:', data);
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `Error: ${error.message}`;
                results['GET /citas/clientes/:id'] = '‚ùå Error';
            }
            updateSummary();
        }

        async function testGetByMes() {
            const anio = document.getElementById('anio').value;
            const mes = document.getElementById('mes').value;
            const resultDiv = document.getElementById('result-getByMes');
            resultDiv.style.display = 'block';
            resultDiv.textContent = 'Cargando...';
            
            try {
                const response = await fetch(`${BASE_URL}/mes?anio=${anio}&mes=${mes}`);
                const data = await response.json();
                
                resultDiv.className = 'result success';
                resultDiv.textContent = `Status: ${response.status}\n\n${JSON.stringify(data, null, 2)}`;
                results['GET /citas/mes'] = '‚úÖ Success';
                
                console.log('GET /citas/mes:', data);
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `Error: ${error.message}`;
                results['GET /citas/mes'] = '‚ùå Error';
            }
            updateSummary();
        }

        async function testGetBySemana() {
            const anio = document.getElementById('anioSemana').value;
            const semana = document.getElementById('semana').value;
            const resultDiv = document.getElementById('result-getBySemana');
            resultDiv.style.display = 'block';
            resultDiv.textContent = 'Cargando...';
            
            try {
                const response = await fetch(`${BASE_URL}/semanas?anio=${anio}&semana=${semana}`);
                const data = await response.json();
                
                resultDiv.className = 'result success';
                resultDiv.textContent = `Status: ${response.status}\n\n${JSON.stringify(data, null, 2)}`;
                results['GET /citas/semanas'] = '‚úÖ Success';
                
                console.log('GET /citas/semanas:', data);
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `Error: ${error.message}`;
                results['GET /citas/semanas'] = '‚ùå Error';
            }
            updateSummary();
        }

        async function testGetByDia() {
            const fecha = document.getElementById('fecha').value;
            const resultDiv = document.getElementById('result-getByDia');
            resultDiv.style.display = 'block';
            resultDiv.textContent = 'Cargando...';
            
            try {
                const response = await fetch(`${BASE_URL}/dias?fecha=${fecha}`);
                const data = await response.json();
                
                resultDiv.className = 'result success';
                resultDiv.textContent = `Status: ${response.status}\n\n${JSON.stringify(data, null, 2)}`;
                results['GET /citas/dias'] = '‚úÖ Success';
                
                console.log('GET /citas/dias:', data);
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `Error: ${error.message}`;
                results['GET /citas/dias'] = '‚ùå Error';
            }
            updateSummary();
        }

        async function testCreate() {
            const resultDiv = document.getElementById('result-create');
            resultDiv.style.display = 'block';
            resultDiv.textContent = 'Enviando...';
            
            const citaData = {
                idCliente: 1,
                idServicio: 1,
                idEstilista: 1,
                fechaCita: "2025-12-01",
                horaCita: "10:00:00",
                estadoCita: "PENDIENTE"
            };
            
            try {
                const response = await fetch(BASE_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(citaData)
                });
                const data = await response.json();
                
                resultDiv.className = 'result success';
                resultDiv.textContent = `Status: ${response.status}\n\nRequest:\n${JSON.stringify(citaData, null, 2)}\n\nResponse:\n${JSON.stringify(data, null, 2)}`;
                results['POST /citas'] = '‚úÖ Success';
                
                console.log('POST /citas:', data);
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `Error: ${error.message}`;
                results['POST /citas'] = '‚ùå Error';
            }
            updateSummary();
        }

        async function testUpdateEstado() {
            const resultDiv = document.getElementById('result-updateEstado');
            resultDiv.style.display = 'block';
            resultDiv.textContent = 'Enviando...';
            
            const updateData = {
                idCita: 1,
                estadoCita: "CONFIRMADA"
            };
            
            try {
                const response = await fetch(`${BASE_URL}/estado`, {
                    method: 'PATCH',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(updateData)
                });
                const data = await response.json();
                
                resultDiv.className = 'result success';
                resultDiv.textContent = `Status: ${response.status}\n\nRequest:\n${JSON.stringify(updateData, null, 2)}\n\nResponse:\n${JSON.stringify(data, null, 2)}`;
                results['PATCH /citas/estado'] = '‚úÖ Success';
                
                console.log('PATCH /citas/estado:', data);
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `Error: ${error.message}`;
                results['PATCH /citas/estado'] = '‚ùå Error';
            }
            updateSummary();
        }

        async function testUpdateFecha() {
            const resultDiv = document.getElementById('result-updateFecha');
            resultDiv.style.display = 'block';
            resultDiv.textContent = 'Enviando...';
            
            const updateData = {
                idCita: 1,
                fechaCita: "2025-12-15",
                horaCita: "14:00:00"
            };
            
            try {
                const response = await fetch(`${BASE_URL}/fecha`, {
                    method: 'PATCH',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(updateData)
                });
                const data = await response.json();
                
                resultDiv.className = 'result success';
                resultDiv.textContent = `Status: ${response.status}\n\nRequest:\n${JSON.stringify(updateData, null, 2)}\n\nResponse:\n${JSON.stringify(data, null, 2)}`;
                results['PATCH /citas/fecha'] = '‚úÖ Success';
                
                console.log('PATCH /citas/fecha:', data);
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `Error: ${error.message}`;
                results['PATCH /citas/fecha'] = '‚ùå Error';
            }
            updateSummary();
        }

        async function testDelete() {
            const id = document.getElementById('deleteCitaId').value;
            const resultDiv = document.getElementById('result-delete');
            resultDiv.style.display = 'block';
            resultDiv.textContent = 'Enviando...';
            
            try {
                const response = await fetch(`${BASE_URL}/${id}`, {
                    method: 'DELETE'
                });
                const data = await response.json();
                
                resultDiv.className = 'result success';
                resultDiv.textContent = `Status: ${response.status}\n\n${JSON.stringify(data, null, 2)}`;
                results['DELETE /citas/:id'] = '‚úÖ Success';
                
                console.log('DELETE /citas/:id:', data);
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `Error: ${error.message}`;
                results['DELETE /citas/:id'] = '‚ùå Error';
            }
            updateSummary();
        }

        function updateSummary() {
            const summaryDiv = document.getElementById('summary');
            let html = '<ul>';
            for (const [endpoint, status] of Object.entries(results)) {
                html += `<li><strong>${endpoint}</strong>: ${status}</li>`;
            }
            html += '</ul>';
            summaryDiv.innerHTML = html;
        }
    </script>
</body>
</html>
